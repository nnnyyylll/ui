{"version":3,"file":"useFieldGroups.js","names":["useExplore","groupFields","fields","reduce","acc","dimension","view","push","useFieldGroups","id","explore","rest","fieldGroups","dimensions"],"sources":["../../../src/hooks/useFieldGroups.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { ILookmlModelExplore, ILookmlModelExploreField } from '@looker/sdk'\nimport { useExplore } from './useExplore'\n\ntype FieldGroups = {\n  [group: string]: ILookmlModelExploreField[]\n}\n\n// Group the fields by view name, for easier browsing\nconst groupFields = (fields: ILookmlModelExploreField[] | undefined) => {\n  if (!fields) return {}\n  return fields.reduce((acc: FieldGroups, dimension) => {\n    const { view } = dimension\n    if (!view) return acc\n    if (!acc[view]) {\n      acc[view] = []\n    }\n    acc[view].push(dimension)\n    return acc\n  }, {})\n}\n\n/**\n * A shared hook for fetching the Field Groups associated with query ID.\n * Used for rendering filter options.\n *\n * @param id a numeric query id\n * @returns field groups and api state\n */\n\nexport const useFieldGroups = (id: number) => {\n  const { explore, ...rest } = useExplore(id)\n  const { fields } = explore || ({} as ILookmlModelExplore)\n\n  const fieldGroups = fields?.dimensions ? groupFields(fields?.dimensions) : {}\n\n  return {\n    fieldGroups,\n    ...rest,\n  }\n}\n"],"mappings":";;;;;;AAMA,SAASA,UAAU,QAAQ,cAAc;AAOzC,MAAMC,WAAW,GAAIC,MAA8C,IAAK;EACtE,IAAI,CAACA,MAAM,EAAE,OAAO,CAAC,CAAC;EACtB,OAAOA,MAAM,CAACC,MAAM,CAAC,CAACC,GAAgB,EAAEC,SAAS,KAAK;IACpD,MAAM;MAAEC;IAAK,CAAC,GAAGD,SAAS;IAC1B,IAAI,CAACC,IAAI,EAAE,OAAOF,GAAG;IACrB,IAAI,CAACA,GAAG,CAACE,IAAI,CAAC,EAAE;MACdF,GAAG,CAACE,IAAI,CAAC,GAAG,EAAE;IAChB;IACAF,GAAG,CAACE,IAAI,CAAC,CAACC,IAAI,CAACF,SAAS,CAAC;IACzB,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;;AAUD,OAAO,MAAMI,cAAc,GAAIC,EAAU,IAAK;EAC5C,oBAA6BT,UAAU,CAACS,EAAE,CAAC;IAArC;MAAEC;IAAiB,CAAC;IAANC,IAAI;EACxB,MAAM;IAAET;EAAO,CAAC,GAAGQ,OAAO,IAAK,CAAC,CAAyB;EAEzD,MAAME,WAAW,GAAGV,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEW,UAAU,GAAGZ,WAAW,CAACC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEW,UAAU,CAAC,GAAG,CAAC,CAAC;EAE7E;IACED;EAAW,GACRD,IAAI;AAEX,CAAC"}